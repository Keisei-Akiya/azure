# AZ-900 総合ポイントまとめ

## 1. クラウドの概念 (Cloud Concepts)

### コストモデル (CapEx vs OpEx)

- **CapEx から OpEx へ:** クラウド移行の典型的なコストメリットは、物理サーバー購入などの「資本的支出（CapEx）」を、月々のサービス利用料である「運用費（OpEx）」に転換することです。これにより CapEx は下がりますが、OpEx は（これまでかかっていなかったサービス料として）上がります。 (問題 2, 70)
- **従量課金制:** 実際に使用した分だけ支払うモデルで、初期の設備投資（CapEx）を不要にし、コスト削減に繋がります。 (問題 2, 68)

### クラウドモデル (Public, Private, Hybrid)

- **ハイブリッドクラウド:** パブリッククラウド (Azure) とオンプレミス/プライベートクラウド環境を接続し、内部ネットワークを拡張する形態です。VPN や ExpressRoute を使用して実現します。 (問題 1, 3, 41, 50)
- **プライベートクラウド:** 企業が自社で所有・管理する物理サーバー上で構築したクラウド環境です。 (問題 3, 50)

### サービスモデル (IaaS, PaaS, SaaS)

- **IaaS (Infrastructure as a Service):** インフラ（サーバー、OS）をユーザーが管理します。SQL Server などを自由にインストールできます。 (問題 1, 18, 28)
- **PaaS (Platform as a Service):** プラットフォームは Microsoft が管理します。ユーザーはアプリケーションコードに集中でき、OS やミドルウェアの管理は不要です。App Service に SQL Server をインストールすることはできません。Azure Backup のように、インフラ管理は不要ですが、ユーザーがポリシー設定などを行う必要があるサービスも PaaS に分類されます。 (問題 1, 3, 18, 28, 46, 52)

### 責任共有モデル

- **物理インフラの責任:** IaaS を利用する場合でも、物理サーバーやデータセンターといった物理インフラの管理はクラウドプロバイダー（Microsoft）の責任です。ユーザーが自社の物理サーバーをクラウドに追加したり、管理したりすることはできません。 (問題 2, 16, 37)

### クラウドの特性

- **コスト効率と可用性:** クラウドのコスト効率は、需要に応じてリソースを増減させる「スケーラビリティ（拡張性）」によって実現されます。複数の可用性ゾーンを利用するなどの冗長構成は、「可用性」を高めますが、コストは増加します。 (問題 3, 27, 28, 66)
- **フォールトトレランス:** Azure 仮想マシンを複数の可用性ゾーンに配置するなど、クラウドの機能を利用することで、従来のオンプレミスサーバーよりもフォールトトレランス（耐障害性）を向上させることができます。 (問題 13)
- **地理的分散 (Geo-distribution):** アプリケーションやデータを複数の地理的なリージョンにデプロイすることで、ユーザーに近い場所からサービスを提供し、遅延を減らしてユーザーエクスペリエンスを向上させることです。 (問題 63)
- **パブリッククラウドの特徴:** ユーザーがポータルや API を通じて自由にリソースを管理できる「セルフサービス管理」と、使用した分だけ料金を支払う「従量課金」モデルであることです。 (問題 65)
- **スケーラビリティ:** 需要に応じてリソースを増減させる能力。スケールアウト/インはインスタンスの数を増減させること、スケールアップ/ダウンはインスタンスの性能（CPU, メモリ）を増減させることです。 (問題 27, 28, 66)
- **仮想マシンのバックアップと保護:** 仮想マシンではバックアップやデータ保護などがマネージド型サービスとして提供されていないため、ユーザー側でデータ暗号化や手動でのスナップショットの取得を設定する必要があります。 (問題 14)

---

## 2. Azure の管理とガバナンス (Management and Governance)

### サブスクリプションと管理グループ

- **サブスクリプション:** Azure アカウント作成後、サービスを展開するための基本単位であり、利用料金の請求単位です。複数のサブスクリプションを１つに統合（マージ）することはできません。課金所有権を譲渡できるのは、所有者（Owner）ロールではなく「課金管理者」です。 (問題 2, 10, 18, 62)
- **管理グループ:** 複数のサブスクリプションを一つのグループとして扱い、ポリシーやアクセス権をまとめて適用できます。大規模な環境の管理を効率化します。 (問題 3, 10, 13, 30, 31, 32)
- **無料アカウント:** 原則として 1 人 1 つまでです。登録にはクレジットカードが必要ですが、一定のクレジットと 12 ヶ月間の限定的な無料サービスが提供されます。 (問題 3, 13, 30, 31, 32)
- **Enterprise Agreement (EA) サブスクリプション:** 大規模組織向けのライセンスプログラム。関連付けには EA ポータルで有効化されたアカウントが必要です。 (問題 30, 31, 32)
- **MSDN Platforms:** 開発者向けのリソースを提供するプラットフォーム。従量課金制サブスクリプションでアクセス可能になります。 (問題 30, 31, 32)
- **MSDN フォーラム:** Azure サブスクリプションの有無にかかわらず、誰でもアクセスして質問できる開発者向けフォーラムです。 (問題 30, 31, 32)

### コスト管理と最適化

- **コスト見積もりツール:** オンプレミス環境と Azure を利用した場合の総保有コストを比較・評価する「TCO 計算ツール」と、特定の Azure サービス構成のコストを個別に見積もる「料金計算ツール」があります。 (問題 1, 22)
- **Azure Cost Management:** 設定した予算（閾値）を超過した場合にアラートを送信する機能です。管理グループやリソースグループ単位でコストを表示できます。 (問題 3, 44, 47)
- **タグ:** リソースに「タグ」を付けることで、プロジェクトや部門ごとにコストを分類し、レポートを作成できます。 (問題 3, 5, 44)
- **課金対象:** 利用していない「パブリック IP アドレス」も課金対象となるため、コスト削減のために削除が必要です。仮想ネットワークやプライベート IP は無料です。 (問題 2, 9, 25, 64, 70)
- **使用制限:** 無料アカウントなどのクレジットに付随する使用制限額は固定であり、変更はできません（削除して従量課金制に移行することは可能）。 (問題 2, 64)
- **仮想マシンのコスト:** 同じサイズの仮想マシンでも、デプロイするリージョンや適用される料金プラン（予約インスタンスなど）によって月額コストは異なります。 (問題 4)
- **仮想マシンの稼働率:** (利用可能な最大分 - 分単位のダウンタイム) / 利用可能な最大分数 x 100 で計算されます。 (問題 20)
- **Azure サポートプラン:** `Standard`, `Professional Direct`, `Premier` のプランで 24 時間年中無休の電話サポートが提供されます。ユーザーの仕様に基づいたアーキテクチャの設計レビューなどの高度なサポートは `Premier` プランで提供されます。 (問題 19, 38, 39)

### Azure Policy とリソースロック

- **Azure Policy:** 組織のルール（例：「特定の種類の VM 作成を禁止する」「特定リージョンのみリソース作成を許可する」「リソース作成時に特定のタグを自動的に適用する」）をリソースに適用し、コンプライアンスを評価・強制します。複数のポリシー定義を一つのグループとしてまとめる「イニシアティブ」機能があります。 (問題 1, 2, 3, 7, 10, 17, 53)
- **リソースロック:** リソースグループや個々のリソースを誤った削除や変更から保護します。読み取り専用ロック（変更と削除を禁止）と削除ロック（削除のみ禁止、変更は許可）があります。1 つのリソースに対して同じ種類のロックを複数設定することが可能です。リソースグループに適用したロックは、その中のすべてのリソースに継承されます。 (問題 1, 16, 58, 59)
- **Azure Blueprints:** 複数のコンポーネント（ポリシーの割り当て、ロールベースのアクセス制御(RBAC)、ARM テンプレート、リソースグループ）を一つのパッケージ（ブループリント）として定義し、反復的にデプロイする機能です。これにより、組織の標準やコンプライアンスに準拠した環境を迅速に構築できます。 (問題 30)
- **サブスクリプション間のリソース移動:** 移動可能なリソースは限定されますが、無料で実施可能です。 (問題 37)移動中はリソースとターゲットのリソースグループがロックされます。 (問題 37)
- **リソースグループとアクセス許可:** リソースグループにアクセス許可を設定することで、そのグループ内の全仮想マシンに効率的にアクセス制御を適用できます。 (問題 41)
- **Azure Resource Manager の機能:** Azure アカウント内のリソースの作成、更新、削除などのライフサイクルを管理するリソース管理機能です。アクセス制御、ロック、タグなどの管理機能を使用して、利用中のリソースを保護および整理します。ARM テンプレートによるインフラストラクチャのコードベース展開、リソースグループの設定、タグ付け、ロックによるリソース管理、Azure マネージドアプリケーション、Azure カスタムリソースプロバイダーなどの機能があります。 (問題 23)

### 監視と正常性 (Monitor, Service Health, Advisor)

- **Azure Monitor:** アラート通知の宛先として、個々のユーザーを指定できますが、Microsoft Entra ID の「グループ ID」を直接指定することはできません。 (問題 2, 55)
- **Azure Service Health:** Azure Portal の「ヘルプとサポート」からアクセスでき、計画メンテナンスやサービスの障害情報など、Azure プラットフォーム全体の正常性を確認できます。 (問題 2, 3, 9, 17, 42)
- **Azure Advisor:** リソースの最適化（コスト、セキュリティ等）に関する推奨事項を提供しますが、Azure Backup の適用状況のような具体的な構成リストは作成できません。 (問題 3, 9, 42)
- **Azure アクティビティログ:** サブスクリプション内のリソースに対する操作（誰が、いつ、何をしたか）を記録するログです。「VM を停止したユーザー」などを特定するのに使用します。デフォルトで 90 日間保存されますが、中長期保存には Azure Storage または Azure Events Hubs にデータを保存します。
  - **Azure Events Hubs:** 大量のイベントデータ（ログ、テレメトリなど）をリアルタイムで取り込み、処理するためのスケーラブルなデータストリーミングプラットフォームです。 (問題 2, 23, 31)
- **Azure Monitor Log Analytics:** オンプレミスや Azure のログを収集・分析する機能です。エージェントをインストールしてログを取得し、閾値設定やアラート通知、ダッシュボードでの可視化が可能です。 (問題 32)

### ID とセキュリティ

- **Microsoft Entra ID:** クラウドベースの ID 管理サービスです。利用にあたりドメインコントローラーの VM は不要です。 (問題 1, 64, 69)
- **Microsoft Entra Identity Protection:** ID ベースのリスク（匿名 IP からのアクセス、通常とは異なるサインインなど）を検出し、自動的に対応します。リスクレベルに応じて、多要素認証 (MFA) の要求やパスワード変更を強制するポリシーを設定できます。サインインリスクポリシーにより、ユーザーのサインイン時のリスクに基づいて、MFA の要求やアクセスのブロックといった制御を行います。「オンプレミスからのみアクセスを許可する」といった要件に対応できます。 (問題 1, 3, 21, 65)
- **Microsoft Entra Domain Services (Azure AD DS):** マネージドなドメインサービスを提供し、従来の Active Directory と同様にグループポリシーの作成・管理が可能です。 (問題 1, 64, 69)
- **Microsoft Defender for Cloud:** Azure リソースがセキュリティのベストプラクティスや規制基準を満たしているかを評価・監視する中心的なサービスです。評価結果に基づいて推奨事項を提供し、規制順守レポートをダウンロードする機能も持ちます。 (問題 2, 3, 13)
- **Azure Information Protection (AIP):** ドキュメントやメールにラベルを付け、分類・保護するサービスです。クレジットカード情報などの機密情報を含むファイルに、自動で透かし（ウォーターマーク）を追加するような設定が可能です。電子メールや機密文書を保護するデータ保護ソリューションです。スキャナー診断ツール（Azure Information Scanner, Start-Aipscan PowerShell コマンド）で保護されたドキュメントやデータの正常性を診断可能です。**Azure SQL Database のレコード、Azure Storage アカウント自体、ネットワークトラフィックを暗号化する機能はありません。** これらにはそれぞれ専用の暗号化機能（TDE、Storage Service Encryption, TLS など）があります。 (問題 1, 2, 14, 16, 29, 31, 32)
- **Microsoft Entra Connect:** オンプレミスの Active Directory と Microsoft Entra ID を同期するためのツールです。パスワードハッシュ同期 (PHS) は、ユーザーへの影響を最小限に抑えつつ、オンプレミスのユーザーアカウント情報を Azure に移行するための一般的な方法です。 (問題 7, 69)
  - オンプレミス環境の ID を Azure クラウドに同期することは MFA を設定する際に必須ではありません。 (問題 18)
- **Microsoft Defender for Identity:** Azure ネットワーク全体のユーザーアクティビティを監視し、疑わしい活動や悪意のある攻撃を検出するサービスです。 (問題 8)
- **MFA とフェデレーション:** オンプレミス環境とフェデレーションを構成することで、ハイブリッド ID に対して MFA を設定することが可能です。 (問題 17)
  - フェデレーションソリューションとは、オンプレミス環境と Azure 環境とをハイブリッドに連携する際に利用する機能のことです。 (問題 17)
- **フェデレーションの定義:** オンプレミス環境やクラウドなどの複数の環境の認証方式で連携できるように、信頼関係を構築するドメイン機能です。認証された利用者に対し、アクションを実行する権限を付与する「承認」とは異なります。 (問題 55)
- **Azure Distributed Denial of Service (DDoS) Protection:** 境界層で DDoS 攻撃に対するフィルター処理を実施し、大規模な攻撃をサービス拒否が発生する前にフィルター処理します。 (問題 56)

### コンプライアンスと信頼

- **Microsoft Service Trust Portal:** Azure の監査レポートやコンプライアンス関連の公式情報を入手できるポータルです。関連するドキュメントやリソースを保存し、一元管理できる「マイライブラリ機能」があります。 (問題 3, 58, 59, 61)
- **プライバシーに関する声明:** Microsoft が顧客データをどのように収集・利用するかを説明した文書です。 (問題 3, 58, 59, 61)
- **トラストセンター:** Azure のセキュリティ、プライバシー、コンプライアンスに関する情報を取得するための中心的なポータルサイトです。 (問題 2)
- **物理セキュリティ:** Azure のデータセンターは、ISO 27001 などの国際的な基準に基づき、第三者機関によるセキュリティ監査を定期的に受けています。 (問題 23, 58, 59, 61)

### 管理ツール

- **Azure PowerShell:** Windows や macOS にインストールして使用できるコマンドラインツールで、Azure リソースのスクリプトによる管理に利用します。Linux 環境で Azure PowerShell スクリプトを実行するには、`PowerShell Core` と `Azure PowerShell モジュール` の両方をインストールする必要があります。 (問題 3, 26, 63)
- **Azure DevTest Labs:** 開発・テスト環境を迅速に構築・破棄するためのサービスです。テンプレートを使用して環境を簡単に展開・削除でき、管理作業を最小限に抑えられます。 (問題 1, 34)
- **Azure Storage Explorer:** GUI ベースのスタンドアロンアプリで、データのアップロード/ダウンロードが可能です。 (問題 49)
- **AzCopy:** コマンドラインユーティリティで、スクリプトによるデータ転送に適しています。 (問題 49)
- **Azure サポート:** 技術的な問題や請求に関する問い合わせは、Azure Portal または Azure Support Ticket REST API を通じてサポートリクエストを作成します。 (問題 19)
- **サービス終了通知:** Microsoft が後継サービスなしに Azure サービスのサポートを終了する場合、少なくとも 12 ヶ月前に通知が行われます。 (問題 5)

### プレビューと SLA

- **パブリックプレビュー:** 一般提供前の試用期間であり、この期間中のサービスは SLA (サービスレベルアグリーメント) の対象外となります。 (問題 1)

---

## 3. Azure のアーキテクチャとサービス (Architecture and Services)

### ネットワーキング

- **ネットワークセキュリティグループ (NSG):** VM やサブネットレベルで動作するファイアウォールです。IP アドレス、ポート、プロトコルに基づいてインバウンド/アウトバウンドの通信を制御します。「Web サーバーからのみ DB サーバーに接続を許可する」といったルールを実現します。1 つの NSG を、同じリージョン内の複数の仮想マシンやサブネットに再利用して適用できます。 (問題 1, 8, 21, 42)
- **ハイブリッド接続:** オンプレミス側の VPN デバイス（パブリック IP アドレスなど）を Azure 上で表現するオブジェクトである「ローカルネットワークゲートウェイ」と、インターネットを経由せずプライベートな専用線でオンプレミスと Azure を接続する「ExpressRoute」があります。ExpressRoute では、オンプレミスから Azure へのインバウンド（内向き）データ転送は常に無料です。 (問題 1, 2, 5, 24, 51, 59)
- **ユーザー定義ルート (UDR) と仮想アプライアンス:** サブネット間のトラフィックを特定の仮想マシン（ファイアウォールなど）に強制的に経由させるなど、既定のルーティングを上書きするために使用します。 (問題 3, 53, 54, 69)
- **データ転送課金:** 異なる Azure リージョン間のデータ転送（特にアウトバウンド、送信）は有料です。 (問題 3)
- **グローバル仮想ネットワークピアリング:** 異なる Azure リージョン間の仮想ネットワークを接続するための機能です。（参考）「仮想ネットワークピアリング」は同じリージョン内の接続を指します。 (問題 12)
- **VPN 接続:** Azure VPN ゲートウェイを利用してオンプレミスネットワークから Azure への暗号化された VPN 接続を実現します。仮想ネットワークゲートウェイは VPN ゲートウェイの一種です。ローカルネットワークゲートウェイはオンプレミス環境の情報を設定するリソース（パブリック IP アドレス、アドレス空間など）です。 (問題 25)
- **Azure Firewall:** 仮想ネットワークリソースを保護するフルマネージド型ファイアウォールサービスです。脅威インテリジェンスベースのフィルタリングにより、既知の悪意のある IP アドレスやドメインとの間のトラフィックを警告・拒否できます。 (問題 52)
- **Azure プライベート DNS:** 仮想ネットワーク (VNet) 専用の DNS サービス。カスタム DNS ソリューションを構成する必要がなくなります。VNet 内のリソースが DNS レコードを解決できるようにするには、VNet をプライベート DNS ゾーンにリンクする必要があります。独自のカスタムドメイン名を使用でき、VNet リンクで自動登録を有効にすると、VNet 内の仮想マシンの DNS レコードが自動的に登録・更新されます。 (問題 53, 54, 69)

### コンピューティングと可用性

- **可用性 (SLA):** 仮想マシンで 99.99% の可用性 SLA を達成するには、2 つ以上の可用性ゾーンにまたがって、最低 2 台の仮想マシンをデプロイする必要があります。 (問題 1, 49, 6, 56, 57, 67)
- **可用性ゾーン (AZ):** 全てのリージョンで利用できるわけではありません。データセンターレベルの障害から保護します。Azure リージョン内で分離された場所で、独自の電源、ネットワーク、冷却手段を備えます。ゾーンレベルの障害から保護します。 (問題 3, 6, 34, 56, 57, 67)
- **可用性セット:** 単一データセンター内の障害（ラック障害など）から保護するための仕組みであり、データセンター全体の障害には対応できません。更新ドメイン（メンテナンスで同時に再起動される VM のグループ、最大 20 個）と障害ドメイン（電源やネットワークを共有する物理ラックのグループ、最大 3 個）があります。 (問題 3, 11, 56, 57, 67)
- **Azure Virtual Desktop (AVD):** アクティブなユーザー単位の月額料金で請求されます。 (問題 66)
  - クライアント OS: Windows, macOS, Android, iOS など、非常に多くのクライアント OS から接続できます。 (問題 67)

### ストレージ

- **基本サービス:** Azure Storage は、非構造化データ用の「BLOB」、構造化 NoSQL データ用の「テーブル」、マネージドファイル共有用の「ファイル」などを提供します。 (問題 3, 18, 68)
- **冗長性 (LRS):** 最も基本的なローカル冗長ストレージ (LRS) でも、データはプライマリリージョン内で自動的に 3 回コピーされ、高い耐久性を確保します。 (問題 1, 9)
- **非マネージドディスク:** ユーザーが管理するストレージアカウント内の「ページ BLOB」として実装される仮想ハードディスク（VHD）です。 (問題 3, 18, 68)
- **Blob Storage アクセス層:** ほとんどアクセスされないデータを、最も低コストで長期間保存するための「アーカイブ層」があります。 (問題 10)
  - Blob ストレージのアーカイブアクセス層はストレージアカウントには設定できません。 (問題 64)

### データベース

- **Azure SQL Managed Instance:** 共通言語ランタイム（CLR）など、オンプレミスの SQL Server との高い互換性が必要なデータベースを移行する場合に最適な PaaS サービスです。Azure SQL Database ではサポートされていない機能も利用できます。 (問題 2, 66)

### AI と分析

- **Azure Cognitive Services:** AI の専門知識がなくても、視覚、音声、言語などのインテリジェントな機能をアプリに組み込めるサービス群です。 (問題 3, 4, 70)
- **Azure Synapse Analytics:** 大規模なデータウェアハウスを構築し、高速なデータ分析を行うための統合分析サービスです。 (問題 3, 4, 70)

### DevOps

- **Azure DevOps Services:** Git リポジトリを提供し、ソースコードを管理できる「Azure Repos」を含みます。Azure DevOps 自体はアプリケーションをホストする機能は持ちません。ビルドやデプロイのパイプラインを構築し、他のサービスにデプロイするために使用します。 (問題 1, 54, 55)

### リージョンとデータセンター

- **リージョンの定義:** 各リージョンは、地理的に離れた場所に配置された独立したデータセンター群で構成されています。 (問題 2, 41, 45)
- **データセンターの数:** すべてのリージョンが「複数の」データセンターを持つわけではありません。単一のデータセンターで構成されるリージョンも存在します。 (問題 2, 41, 45)
- **リージョン間接続:** リージョン間は Microsoft の広大なグローバルネットワークで接続されていますが、「専用線で接続されている」という単純な表現は正しくありません。 (問題 2, 43)
- **Azure China:** Microsoft ではなく、現地のパートナー企業である 21Vianet によって運営されています。 (問題 48)
- **Azure のゾーンと可用性ゾーン:** 「Azure のゾーン」は課金のために Azure リージョンを地域別にグループ化したものです。データ転送料金に影響します。 (問題 34)
  - 「可用性ゾーン」は Azure リージョン内で分離された場所で、独自の電源、ネットワーク、冷却手段を備えます。ゾーンレベルの障害から保護します。 (問題 34)
- **複数リージョン利用時の追加コスト:** 1 つのアカウントで Azure を複数リージョンにまたいでグローバルに利用する際には、追加コストは必要ありません。 (問題 36)

### その他の主要サービス

- **Azure Government:** 米国政府機関とその請負業者専用に物理的に分離された Azure 環境です。米国の厳格なコンプライアンス要件を満たすために提供されています。 (問題 2, 35)
- **リソースの移動:** Azure リソースは、リソースグループ間やサブスクリプション間だけでなく、異なるリージョン間でも移動させることが可能です（Azure Resource Mover などを利用）。 (問題 2, 39)
- **IoT Central:** 多数の IoT デバイスの接続、監視、管理を大規模に行うための、中央集権的な管理ソリューション（SaaS）です。 (問題 1)
